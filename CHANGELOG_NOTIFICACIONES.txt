CHANGELOG - Sistema de Notificaciones Actualizado
=================================================

## CAMBIOS REALIZADOS

### 1. Backend - Nuevos Endpoints

#### patient_login.php
- Endpoint: POST /backend/patient_login.php
- Par√°metros: { dni, password }
- Retorna: token JWT + datos del paciente
- Nota: Por defecto la contrase√±a del paciente es su DNI

#### patient_studies.php
- Endpoint: GET /backend/patient_studies.php
- Headers: Authorization: Bearer {token}
- Retorna: Lista de estudios del paciente autenticado
- Campos: id, study_name, file_url, file_type, study_date

### 2. Frontend - Nuevas P√°ginas

#### PatientLogin.jsx (/patient-login)
- Formulario de login para pacientes
- Campos: DNI y Contrase√±a
- Genera JWT y guarda en localStorage
- Redirige a /patient-studies despu√©s del login

#### PatientStudies.jsx (/patient-studies)
- Panel de estudios del paciente
- Muestra todos los estudios subidos
- Permite: Ver (visor) y Descargar archivos
- Auto-logout si no hay token v√°lido

### 3. Cambios en Componentes Existentes

#### UploadForm.jsx
- Agregado campo: "Email Paciente" (opcional)
- El email se env√≠a a backend y se guarda en BD
- Mensaje de √©xito mejorado mostrando email notificado

#### App.jsx
- Nuevas rutas:
  - /patient-login ‚Üí PatientLogin
  - /patient-studies ‚Üí PatientStudies
- Importaciones actualizadas

### 4. Cambios en Backend

#### register_study.php
- Ahora acepta: patient_email como par√°metro
- Guarda email en tabla patients
- Mejora en logging de errores de notificaciones

#### composer.json
- Removido: "phpmailer/phpmailer": "^6.9"
- Mantiene: aws-sdk-php y php-jwt

#### mail_config.php
- Sistema migrado a PHP mail() nativa
- Eliminadas dependencias de PHPMailer
- Compatible con cualquier hosting (Hostinger, etc)
- Email headers correctamente formateados

---

## FLUJO COMPLETO

### Para Pacientes:
1. Doctor sube estudio e ingresa email del paciente
2. Paciente recibe correo de notificaci√≥n
3. Paciente accede a /patient-login
4. Usa DNI y contrase√±a para ingresar
5. Ve todos sus estudios en /patient-studies
6. Puede visualizar y descargar estudios

### Para Doctores:
1. Sube estudio del paciente
2. Notificaci√≥n aparece en campana (üîî)
3. Notificaci√≥n en BD se marca como le√≠da al hacer click
4. Recibe email de confirmaci√≥n (si tiene email en sistema)

---

## NOTAS IMPORTANTES

- Contrase√±a inicial paciente = su DNI (cambiable en patient_login.php)
- Email del paciente es OPCIONAL para subir estudio
- Notificaciones in-app funcionan sin email
- Sistema funciona en localhost y Hostinger sin cambios

